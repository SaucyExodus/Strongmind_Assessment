<% content_for :title, "Toppings & Pizzas" %>

<h1 class="text-center">Toppings & Pizzas</h1>

<div class="container">
  <div class="row">

    <!-- Toppings Table -->
    <div class="col-md-6">
      <h2 class="text-center">Topping List</h2>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Name</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @toppings.each do |topping| %>
            <tr>
              <td><%= topping.name %></td>
              <td>
                <%= link_to "Show", topping, class: "btn btn-primary btn-sm" %>
                <%= link_to "Edit", edit_topping_path(topping), class: "btn btn-warning btn-sm" %>
                <%= button_to "Delete", topping, 
                  method: :delete, 
                  data: { turbo_confirm: "Are you sure you want to delete this topping? \n(#{topping.name})\n\nThis will also delete associated pizzas!" }, 
                  class: "btn btn-danger btn-sm", 
                  form: { style: "display: inline;" } 
                %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
      <%= link_to "New Topping", new_topping_path, class: "btn btn-success" %>
    </div>

    <!-- Pizzas Table -->
    <div class="col-md-6">
      <h2 class="text-center">Pizza List</h2>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Name</th>
            <th>Toppings</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @pizzas.each do |pizza| %>
            <tr>
              <td><%= pizza.name %></td>
              <td><%= pizza.toppings.map(&:name).join(", ") %></td>
              <td>
                <%= link_to "Show", pizza, class: "btn btn-primary btn-sm" %>
                <%= link_to "Edit", edit_pizza_path(pizza), class: "btn btn-warning btn-sm" %>
                <%= button_to "Delete", pizza, 
                  method: :delete, 
                  data: { turbo_confirm: "Are you sure you want to delete this pizza? \n\n#{pizza.name}" }, 
                  class: "btn btn-danger btn-sm", 
                  form: { style: "display: inline;" } 
                %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
      <%= link_to "New Pizza", new_pizza_path, class: "btn btn-success" %>
    </div>
  </div>
</div>
